<template>
    <div class="container-fluid">
        <div class="row">
            <div class="col-md-12">
                <div class="card">
                    <div class="card-header">
                        <h4 class="card-title">Добавление сервиса</h4>
                    </div>
                    <div class="card-body">
                        <el-row :gutter="20">
                            <el-col :span="12">
                                <div class="t-control t-box">
                                    <span class="t-box-title">Введите название сервиса</span>
                                    <el-input placeholder="Введите название сервиса"  v-model="title" />
                                </div>
                                <div class="t-control t-box">
                                    <span class="t-box-title">Краткое описание</span>
                                    <el-input
                                        type="textarea"
                                        :rows="2"
                                        placeholder="Краткое описание"
                                        v-model="desc">
                                    </el-input>
                                </div>
                            </el-col>
                            <el-col :span="12">
                                <div class="t-control t-box">
                                    <el-select v-model="category_id" placeholder="Выберите категорию" @change="changeCat">
                                        <el-option
                                            v-for="item in categories"
                                            :key="item.id"
                                            :label="item.title"
                                            :value="item.id">
                                        </el-option>
                                    </el-select>
                                </div>
                                <div class="t-control t-box">
                                   <div>
                                       <span class="demonstration">Простота использования</span>
                                       <el-rate v-model="assessmentUse" />
                                   </div>
                                   <div>
                                       <span class="demonstration">Обслуживания клиентов</span>
                                       <el-rate v-model="assessmentSupport" />
                                   </div>
                                </div>
                                <div class="t-control t-box">

                                </div>
                            </el-col>
                        </el-row>

                        <div class="t-control t-box">
                            <TuiEditor
                                mode="wysiwyg"
                                preview-style="vertical"
                                height="300px"
                                v-model="content"
                            />
                        </div>

                        <el-row :gutter="20">
                            <el-col :span="12">
                                <div class="t-control t-box">
                                    <span class="t-box-title">Ссылка на сайт</span>
                                    <el-input placeholder="Ссылка на сайт"  v-model="linkSite" />
                                </div>
                                <div class="t-control t-box">
                                    <span class="t-box-title">Ссылка на кейсы</span>
                                    <el-input placeholder="Ссылка на кейсы"  v-model="linkCases" />
                                </div>
                                <div class="t-control t-box">
                                    <span class="t-box-title">Ссылка на инструкции</span>
                                    <el-input placeholder="Ссылка на инструкции"  v-model="linkInstructions" />
                                </div>
                            </el-col>
                            <el-col :span="12">
                                <div class="t-control t-box">
                                    <span class="t-box-title">Ссылка на видео</span>
                                    <el-input placeholder="Ссылка на видео"  v-model="linkVideo" />
                                </div>
                                <div class="t-control t-box">
                                    <span class="t-box-title">Ссылка на API</span>
                                    <el-input placeholder="Ссылка на API"  v-model="linkAPI" />
                                </div>
                                <div class="t-control t-box">
                                    <span class="t-box-title">Метод оплаты</span>
                                    <el-input placeholder="Метод оплаты"  v-model="methodsPay" />
                                </div>
                            </el-col>
                        </el-row>
                        <el-row :gutter="20">
                            <el-col :span="12">
                                <div class="t-control t-box">
                                    <span class="t-box-title">Платформы установки</span>
                                    <el-select
                                        v-model="systemInstall"
                                        multiple
                                        collapse-tags
                                        style="margin-left: 20px;"
                                        placeholder="Выбрать">
                                        <el-option
                                            v-for="item in systemInstallAll"
                                            :key="item.value"
                                            :label="item.label"
                                            :value="item.value">
                                        </el-option>
                                    </el-select>
                                </div>
                                <div class="t-control t-box">
                                    <span class="t-box-title">Для кого</span>
                                    <el-select
                                        v-model="professions"
                                        multiple
                                        filterable
                                        allow-create
                                        default-first-option
                                        placeholder="Для кого"
                                        class="full">
                                        <el-option
                                            v-for="item in professionsOptions"
                                            :key="item.value"
                                            :label="item.label"
                                            :value="item.value">
                                        </el-option>
                                    </el-select>
                                </div>
                            </el-col>
                            <el-col :span="12">
                                <div class="t-control t-box">
                                    <el-select
                                        v-model="socials"
                                        multiple
                                        filterable
                                        allow-create
                                        default-first-option
                                        placeholder="Введите ссылки на соц. сети"
                                        class="full">
                                        <el-option
                                            v-for="item in socialsOptions"
                                            :key="item.value"
                                            :label="item.label"
                                            :value="item.value">
                                        </el-option>
                                    </el-select>
                                </div>
                            </el-col>
                        </el-row>
                        <div class="t-control">
                            <el-button type="success" plain @click="saveService">Сохранить</el-button>
                        </div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</template>

<script>
    import axios from "axios";
    export default {
        layout: 'admin',
        name: "create",
        data() {
            return {
                title: '',
                category_id: '',
                desc: '',
                assessmentUse: 0,
                assessmentSupport: 0,
                content: "<h1>Введите описание</h1>",
                linkSite: '',
                linkVideo: '',
                linkCases: '',
                linkAPI: '',
                linkInstructions: '',
                methodsPay: 'Карта/Эл. кошельки',
                systemInstall: [],
                socials: [],
                socialsOptions: [],
                professions: [],
                professionsOptions: [{value: 'маркетолог', label: 'маркетолог'}]

            }
        },
        methods: {
            saveService(){
                let uri = process.env.baseUrl + `services/create`;
                axios.post(uri, {
                    title: this.title
                }).then((response) => {
                    this.$store.dispatch('data/services/GET_SERVICES')
                    this.$router.push({path: '/admin/services'});
                });
            },
            changeCat(e){
              console.log(e)
            }
        },
        computed: {
            categories() {
                return this.$store.state.data.category.categories;
            },
            systemInstallAll() {
                return this.$store.state.data.others.systemInstall;
            }
        }
    }
</script>

<style scoped>

</style>
