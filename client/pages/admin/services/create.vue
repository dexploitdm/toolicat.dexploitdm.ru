<template>
    <div class="container-fluid">
        <div class="row">
            <div class="col-md-12">
                <div class="card">
                    <div class="card-header">
                        <h4 class="card-title">Добавление сервиса</h4>
                    </div>
                    <div class="card-body">
                        <el-input placeholder="Введите название сервиса" v-model="title"></el-input>
                        <el-select v-model="category_id" placeholder="Select" @change="changeCat">
                            <el-option
                                v-for="item in categories"
                                :key="item.id"
                                :label="item.title"
                                :value="item.id">
                            </el-option>
                        </el-select>
                        <button class="backend-btn" @click="saveService">Сохранить</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</template>

<script>
    import axios from "axios";

    export default {
        layout: 'admin',
        name: "create",
        data() {
            return {
                title: '',
                category_id: ''
            }
        },
        methods: {
            saveService(){
                let uri = process.env.baseUrl + `services/create`;
                axios.post(uri, {
                    title: this.title
                }).then((response) => {
                    this.$router.push({path: '/admin/services'});
                });
            },
            changeCat(e){
              console.log(e)
            }
        },
        computed: {
            categories() {
                return this.$store.state.data.category.categories;
            }
        }
    }
</script>

<style scoped>

</style>
