<template>
    <div class="page content">
        <div class="title-box">
            <h1 class="title-h1">Бесплатно добавим ваш сервис в каталог</h1>
        </div>
        <div class="page-box">
            <div class="cr-service">
                <el-steps :active="active">
                    <el-step></el-step>
                    <el-step></el-step>
                    <el-step></el-step>
                </el-steps>
                <form @submit="formSubmit" enctype="multipart/form-data">
                <div class="step-box" v-if="active === 0">
                    <h2 class="title-h2">О компании</h2>

                    <div class="cr-service-form">
                        <div class="t-control box-control">
                            <span class="t-label">Ссылка на ваш сервис или программу*</span>
                            <input type="text" class="t-input" v-model="linkSite" />
                        </div>
                        <div class="t-control box-control">
                            <span class="t-label">Ваше имя*</span>
                            <input type="text" class="t-input" v-model="name" />
                        </div>
                        <div class="t-control box-control">
                            <span class="t-label">Ваша фамилия*</span>
                            <input type="text" class="t-input" v-model="surname" />
                        </div>
                        <div class="t-control box-control">
                            <span class="t-label">Email на домене вашего сервиса*</span>
                            <input type="text" class="t-input" v-model="email" />
                        </div>
                    </div>


                </div>

                <div class="step-box" v-if="active === 1">
                    <h2 class="title-h2">О продукте</h2>
                    <div class="cr-service-form">

                        <div class="t-control box-control">
                            <span class="t-label">Категория*</span>
                            <el-select
                                v-model="ProductCat"
                                multiple
                                filterable
                                allow-create
                                default-first-option
                                placeholder="Выбрать категорию"
                                class="t-select">
                                <el-option
                                    v-for="item in cat"
                                    :key="item.value"
                                    :label="item.label"
                                    :value="item.value">
                                </el-option>
                            </el-select>
                        </div>
                        <div class="t-control box-control">
                            <span class="t-label">Описание *</span>
                            <el-input
                                type="textarea"
                                :rows="2"
                                :autosize="{ minRows: 5, maxRows: 6}"
                                v-model="ProductDesc">
                            </el-input>
                        </div>
                        <div class="control-flex">
                            <div class="t-control box-control">
                                <span class="t-label">Видео</span>
                                <input type="text"
                                       class="t-input"
                                       placeholder="Ссылка на видео"
                                       v-model="ProductVideo" />
                            </div>
                            <div class="t-control t-upload upload-box">
                                <div class="t-upload-box">
                                    <div class="t-upload-icon"></div>
                                    <div class="t-upload-label">Выбрат файл</div>
                                    <div class="t-upload-btn full">Загрузить</div>
                                </div>
                            </div>
                        </div>
                        <div class="t-control t-upload box-control t-control-border">
                            <span class="t-label">Интерфейс <span class="t-label_small">(скрины продукта)</span></span>
                            <div class="t-upload-box">
                                <div class="t-upload-icon"></div>
                                <div class="t-upload-label">Выбрат файл</div>
                                <div class="t-upload-btn">Загрузить</div>
                            </div>
                        </div>
                        <div class="t-control box-control">
                            <span class="t-label">Пробный период</span>
                            <el-checkbox v-model="testPeriod">
                                <span v-if="testPeriod === true">Да</span>
                                <span v-else>Нет</span>
                            </el-checkbox>
                        </div>

                        <div class="t-control box-control" v-if="testPeriod">
                            <span class="t-label">Пробный период*</span>
                            <div class="grid g-two">
                                <el-date-picker
                                    v-model="ProductDateTest"
                                    type="date"
                                    placeholder="Указать дату"
                                    class="date-control">
                                </el-date-picker>
                                <input type="text"
                                       class="t-input"
                                       placeholder="Ссылка на пробный период"
                                       v-model="ProductLinkTestPeriod" />
                            </div>
                        </div>
                        <div class="t-control box-control">
                            <span class="t-label">Цена*</span>
                            <input type="text" class="t-input" v-model="price" />
                        </div>
                        <div class="t-control box-control">
                            <span class="t-label">Для кого*</span>
                            <el-select
                                v-model="ProductWhom"
                                multiple
                                filterable
                                allow-create
                                default-first-option
                                placeholder="Добавьте ключевые слова"
                                class="t-select many">
                                <el-option
                                    v-for="item in whom"
                                    :key="item.value"
                                    :label="item.label"
                                    :value="item.value">
                                </el-option>
                            </el-select>
                        </div>
                    </div>
                </div>

                <div class="step-box" v-if="active === 2">
                    <h2 class="title-h2">Завершение</h2>
                    <div class="cr-service-form">
                        <div class="t-control box-control">
                            <span class="t-label">Система на которую устанавливается</span>
                            <el-select
                                v-model="ProductSystem"
                                multiple
                                filterable
                                default-first-option
                                placeholder="Выбрать"
                                class="t-select">
                                <el-option
                                    v-for="item in systemCat"
                                    :key="item.value"
                                    :label="item.label"
                                    :value="item.value">
                                </el-option>
                            </el-select>
                        </div>
                        <div class="t-control box-control">
                            <span class="t-label">Особенности и возможности</span>
                            <input type="text" class="t-input" v-model="ProductFeatures" />
                        </div>
                        <div class="t-control box-control">
                            <span class="t-label">Поддержка</span>
                            <el-radio v-model="ProductSupport" class="check" label="1">Есть</el-radio>
                            <el-radio v-model="ProductSupport" class="check" label="2">Нету</el-radio>
                        </div>
                        <div class="t-control box-control">
                            <span class="t-label">Кейсы</span>
                            <input type="text" class="t-input" placeholder="Вставьте ссылку"
                                   v-model="ProductKeysLink" />
                        </div>
                        <div class="t-control box-control">
                            <span class="t-label">Инструкция по использованию</span>
                            <input type="text" class="t-input" placeholder="Вставьте ссылку"
                                   v-model="ProductInstructionLink" />
                        </div>
                        <div class="t-control box-control">
                            <span class="t-label">API</span>
                            <input type="text" class="t-input" placeholder="Вставьте ссылку"
                                   v-model="ProductApiLink" />
                        </div>
                        <div class="t-control box-control">
                            <span class="t-label">Социальные сети</span>
                            <input type="text" class="t-input" v-model="ProductSocial" />
                        </div>

                    </div>
                </div>

                <div class="step-action">
                    <button type="button" class="t-button t-next"  @click="next">Далее</button>
                </div>
                </form>
            </div>
        </div>
    </div>
</template>

<script>
    import axios from "axios";
    export default {
        name: "create-service",
        data() {
            return {
                active: 0,
                linkSite: '',
                name: '',
                surname: '',
                email: '',

                ProductCat: [],
                cat: [{
                    value: 'cat1', label: 'Категория 1'},
                    {value: 'cat2', label: 'Категория 2'},
                    {value: 'cat3', label: 'Категория 3'}],
                ProductDesc: '',
                ProductVideo: '',
                testPeriod: '',
                ProductDateTest: '',
                ProductLinkTestPeriod: '',
                price: '',
                ProductWhom: '',
                whom: [{
                    value: 'cat1', label: 'Менеджер'},
                    {value: 'cat2', label: 'Малый бизнес'}],

                ProductSystem: '',
                systemCat: [{
                    value: 'cat1', label: '1'},
                    {value: 'cat2', label: '2'}],
                ProductFeatures: '',
                ProductSupport: '',
                ProductKeysLink: '',
                ProductInstructionLink: '',
                ProductApiLink: '',
                ProductSocial: ''

            }
        },
        methods: {
            formSubmit(e) {
                e.preventDefault();
                let currentObj = this;
                const config = {
                    headers: { 'content-type': 'multipart/form-data' }
                }
                let formData = new FormData();
                formData.append('linkSite', this.linkSite);
                formData.append('name', this.name);
                formData.append('surname', this.surname);
                formData.append('email', this.email);
                formData.append('price', this.price);
            },
            next() {
                if(this.active === 0){
                    //company

                }
                if(this.active === 1){
                    //product

                }
                if(this.active === 2){
                    //finish step
                    console.log('push')
                }
                if (this.active++ > 2) this.active = 0;
            }
        },
        computed: {
            categories() {
                return this.$store.state.data.category.categories;
            },
            systemInstallAll() {
                return this.$store.state.data.others.systemInstall;
            }
        }
    }
</script>

<style scoped>

</style>
